定义
	公钥证书里面记有姓名、组织、邮箱、地址等个人信息，以及属于此人的公钥，并由认证机构施加数字
	签名。公钥证书也简称为证书。
	数字证书是一段包含用户身份信息、用户公钥信息以及身份验证机构数字签名的数据。
	身份验证机构的数字签名可以确保证书信息的真实性，用户公钥信息可以保证数字信息传输的完整性，用户的数字签名可以保证数字信息的不可否认性。
证书标准规范X.509
	X.509证书大体上包含以下3部分内容：
		签名前的证书 —— 签名对象的信息
		数字签名算法 —— 对证书签名时使用的算法
		数字签名信息 —— 对证书施加的数字签名
		
公钥基础设施PKI
组成要素
	用户 —— 使用PKI的人
	认证机构 —— 颁发证书的实体
	仓库 —— 保存证书的数据库
用户
	包括两种：一种是希望使用PKI注册自己的公钥的人，另一种是希望使用已注册的公钥的人。
	注册公钥的用户所进行的操作：
		生成密钥对（也可以由认证机构完成）
		在认证机构注册公钥
		向认证机构申请证书
		根据需要申请作废已注册的公钥
		解密接收到的密文
		对消息进行数字签名
	使用已注册公钥的用户所进行的操作
		将消息加密后发送给接收者
		验证数字签名
认证机构（CA）
	认证机构具体所进行的操作如下：
		生成密钥对（也可以由用户生成）
			在认证机构生成密钥对的情况下，认证机构需要将私钥发送给用户，这时就需要使用PKCS#12等
			规范。
		在注册公钥时对本人身份进行认证
			在用户自行生成密钥对的情况下，用户会请求认证机构来生成证书。申请证书时所使用的规范是
			由PKCS#10定义的。生成的证书格式是由PKCS#6和X.509定义的。
		生成并颁发证书
		作废证书
			当用户的私钥丢失、被盗、禁止使用时，认证机构需要对证书进行作废。CRL是认证机构宣布作
			废的证书序列号的清单，并由认证机构施加数字签名。PKI用户需要从认证机构获取最新的CRL，
			并查询自己要用于验证签名（或者用于加密）的公钥证书是否作废。
	认证机构的工作中，公钥注册和本人身份认证这一部分可以由注册机构（RA）来分担。这样一来，认证机
	构就可以将精力集中到颁发证书上，从而减轻了认证机构的负担。
仓库
	是一个保存证书的数据库，PKI用户在需要的时候可以从中获取证书。仓库也叫证书目录。

证书的层级结构
根CA
自签名
对证书的攻击
	在公钥注册之前进行攻击
	注册相似人名进行攻击
	窃取认证机构的私钥进行攻击
	攻击者伪装成认证机构进行攻击
	钻CRL的空子进行攻击
	
※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※※

CA签发证书
a.服务方S向第三方机构CA提交公钥、组织信息、个人信息(域名)等信息并申请认证;
b.CA通过线上、线下等多种手段验证申请者提供信息的真实性，如组织是否存在、企业是否合法，是否拥有域名的所有权等;
c.如信息审核通过，CA会向申请者签发认证文件-证书。
证书包含以下信息：申请者公钥、申请者的组织信息和个人信息、签发机构 CA的信息、有效时间、证书序列号等信息的明文，同时包含一个签名;
签名的产生算法：首先，使用散列函数计算公开的明文信息的信息摘要，然后，采用 CA的私钥对信息摘要进行加密，密文即签名;

ca签发证书过程（这里将服务器作为申请者，客户端作为验证者，二者身份可以互换）
	1.服务器申请阶段
		服务器生成公私钥对，并将公钥及证书签发请求文件发送给ca。
		请求文件信息包括服务器公钥、服务器相关信息等。
	2.ca审核阶段
		ca审核服务器发来的信息，对关键信息使用ca的私钥进行"签名"，这样客户端可以利用ca的公钥验证签名，从而确认了服务器身份的真实性。
		ca是无条件被信任的，如果客户端验证了ca的身份合法，也就确认了服务器身份的真实性。
		ca的公钥对外公开，客户端可以很容易获得。
	3.ca签发阶段
		审核通过后，ca将证书签发给服务器。
		除了发送给服务器之外，ca也可以将服务器身份证书的一些信息保存在ocsp服务器上用于以后客户端对服务器身份真实性的验证。ocsp服务器由ca维护。
		ocsp服务器可以看作是ca的代理，验证ocsp服务器的身份就相当于验证ca的身份。这可以减少ca的工作负荷。
	4.身份证书包含的信息
		服务器公钥、服务器信息（组织和个人）、ca信息、有效时间、证书序列号等明文信息。
		ca的签名信息。
ca签名过程
	1.使用散列函数哈希明文生成信息摘要
	2.采用ca的私钥对信息摘要进行加密，此密文即签名
		
ca吊销证书过程
	对ocsp服务器和证书吊销列表crl进行更新。证书吊销列表crl由ca维护。
	
这里只有ca一个签发者，在证书链中，可以有很多个签发者。

签发者
	C=CN
	L=JiangSu
	O=SYAN Tech
	OU=Support
	CN=TESTCA
	x500UniqueIdentifier=1291958225U4D01B7D1479FC
证书项
	C=CN
	L=JiangSu
	O=SYAN Tech
	OU=Support
	CN=TESTCA
	x500UniqueIdentifier=1291958225Y$D01B7D1479FC
序列号
	B5E0A83DD3697F33
生效日期
	2010/12/01 00:00:00(2010/11/30 16:00:00 GMT)
失效日期
	2020/12/07 00:00:00(2020/12/06 16:00:00 GMT)
密钥类型
	RSA
密钥长度
	1024
证书指纹
	78:41:0E:6B:53:A2:61:78:0F:0D:0E:6C:A3:7A:31:31:1D:36:81:C3
	(SHA1)
Extensions
	X509v3 Basic Constraints		CA:TRUE
	Netscape Comment				NETONE CA certificate
	X509v3 Subject Key Identifier	3E:29:90 ... B6:4D:75
	X509v3 Authority Key Identifier keyid:...
证书签发者名字
	OU = Support